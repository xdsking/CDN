<!DOCTYPE html>
<html>
    <head>
        <title>ms-on-mousewheel</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
        <script src="./dist/avalon.js"></script>
        <script>
            var vm = avalon.define({
                $id: "test",
                aaa: "1",
                v: {
                    onError: function(a){
                        console.log(a, "!!!")
                    }
                },
                callback: function (e) {
                    console.log(e)
                }
            })
            avalon.validators.pattern = {
                message: '必须匹配/{{pattern}}/这样的格式',
                get: function (value, field, next) {
                    var elem = field.element
                    var h5pattern = elem.getAttribute("pattern")
                    var mspattern = elem.getAttribute("data-pattern")
                    var pattern = field.data.pattern = h5pattern || mspattern
                    var re = new RegExp('^(?:' + pattern + ')$')
                    next(re.test(value))
                    return value
                }
            }
        </script>
    </head>

    <body ms-controller="test">
        <div ms-validate="@v">
            <input ms-duplex="@aaa" data-duplex-changed="@callback" 
                   data-validators='pattern' data-pattern="\d+" >{{@aaa}}
        </div>
    </body>
</html>